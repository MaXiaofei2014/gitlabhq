.panel.mr-state-widget.panel-default
  - if @merge_request.source_project.ci_service && @commits.any?
    .panel-heading
      = render "projects/merge_requests/show/mr_ci"
  .panel-body
    - if @merge_request.open?
      - if @merge_request.source_branch_exists? && @merge_request.target_branch_exists?
        = render "projects/merge_requests/show/mr_accept"
      - else
        = render "projects/merge_requests/show/no_accept"

    - if @merge_request.closed?
      %h4
        由 #{link_to_member(@project, @merge_request.closed_event.author, avatar: false)}
        #{time_ago_with_tooltip(@merge_request.closed_event.created_at)} 关闭
      %p 变更没有合并到目标分支

    - if @merge_request.merged?
      %h4
        由 #{link_to_member(@project, @merge_request.merge_event.author, avatar: false)}
        #{time_ago_with_tooltip(@merge_request.merge_event.created_at)} 合并
      = render "projects/merge_requests/show/remove_source_branch"

    - unless @commits.any?
      %h4 无需合并
      %p
        从
        %span.label-branch #{@merge_request.source_branch}
        到
        %span.label-branch #{@merge_request.target_branch}
        没有合并内容
        %br
        在使用不同分支或推送新代码后重试。

  - if !@closes_issues.empty? && @merge_request.open?
    .panel-footer
      %span
        %i.icon-ok
        接受此合并请求将关闭相关 #{@closes_issues.size == 1 ? '问题' : '问题'}
        = succeed '.' do
          != gfm(issues_sentence(@closes_issues))

